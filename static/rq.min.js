const rq={};rq.get=function(url){return fetch(url).then(handleResponse)};rq.post=function(url,data){return fetch(url,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(data)}).then(handleResponse)};rq.put=function(url,data){return fetch(url,{method:"PUT",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(data)}).then(handleResponse)};rq.delete=function(url){return fetch(url,{method:"DELETE"}).then(handleResponse)};rq.fetch=function(url,options){return fetch(url,options).then(handleResponse)};function handleResponse(response){let contentType=response.headers.get("content-type");if(contentType.includes("application/json")){return handleJSONResponse(response)}else if(contentType.includes("text/html")){return handleTextResponse(response)}else{throw new Error("Content-type ${contentType} not supported.")}}function handleJSONResponse(response){return response.json().then(json=>{if(response.ok){return json}else{let error=Object.assign({},json,{status:response.status,statusText:response.statusText});return Promise.reject(error)}})}function handleTextResponse(response){return response.text().then(text=>{if(response.ok){return json}else{return Promise.reject({status:response.status,statusText:response.statusText,err:text})}})}